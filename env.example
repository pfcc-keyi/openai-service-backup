# OpenAI Service Configuration
# üîë CENTRAL API KEY MANAGER for the entire microservice system

# Service settings
SERVICE_NAME=openai-service
SERVICE_VERSION=1.0.0
DEV_MODE=false
LOG_LEVEL=INFO

# Server configuration
HOST=0.0.0.0
PORT=8004
WORKERS=1

# Authentication
SERVICE_TOKEN=openai-service-token

# Redis configuration for distributed locks
REDIS_URL=redis://localhost:6379
REDIS_DB=0
# REDIS_PASSWORD=your_redis_password

# üîë OpenAI API Key Pool (REQUIRED)
# ‚ö†Ô∏è  IMPORTANT: OpenAI Service is the ONLY service that should have OpenAI API keys
# Other services (labeling-service, json-service) get keys dynamically through locks

# Primary API key (required)
PRIMARY_OPENAI_API_KEY=sk-your-primary-openai-api-key-here

# Additional API keys for load balancing (optional)
# OPENAI_API_KEYS=sk-key1,sk-key2,sk-key3

# üìù Configuration for other services:
# labeling-service/.env should have:
#   DEV_MODE=false
#   OPENAI_SERVICE_URL=http://localhost:8004
#   # NO OpenAI API keys needed!
#
# json-service/.env should have:
#   DEV_MODE=false  
#   OPENAI_SERVICE_URL=http://localhost:8004
#   # NO OpenAI API keys needed!

# Lock configuration
DEFAULT_LOCK_TIMEOUT=300
MAX_LOCK_TIMEOUT=1800
LOCK_ACQUIRE_TIMEOUT=30

# Redis Redlock settings
REDLOCK_RETRY_COUNT=3
REDLOCK_RETRY_DELAY=0.2
REDLOCK_VALIDITY_TIME=10000

# API Key health and rotation
API_KEY_HEALTH_CHECK_INTERVAL=300
API_KEY_ROTATION_ENABLED=true

# Statistics and monitoring
USAGE_STATS_RETENTION_DAYS=30
METRICS_COLLECTION_ENABLED=true

# Request timeout
REQUEST_TIMEOUT=30
HEALTH_CHECK_TIMEOUT=10 